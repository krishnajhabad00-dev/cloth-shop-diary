       // Load existing data from localStorage or start with an empty array
let data = JSON.parse(localStorage.getItem("shop")) || [];

// Function to add a new customer
function add() {
    // Getting values from input fields
    let n = document.getElementById("name").value;
    let p = document.getElementById("phone").value;
    let a = document.getElementById("amount").value;

    // Validation: Check if fields are empty
    if (n === "" || p === "" || a === "") {
        alert("Please fill all fields");
        return;
    }

    // Creating the customer object and adding it to the array
    data.push({
        id: Date.now(),
        n: n,
        p: p,
        a: a,
        date: new Date().toLocaleDateString()
    });

    // Save the updated list to local storage
    localStorage.setItem("shop", JSON.stringify(data));

    // Clear the input fields for the next entry
    document.getElementById("name").value = "";
    document.getElementById("phone").value = "";
    document.getElementById("amount").value = "";

    // Refresh the list on the screen
    show();
}

// Function to delete (mark as paid) a customer
function del(id) {
    data = data.filter(x => x.id != id);
    localStorage.setItem("shop", JSON.stringify(data));
    show();
}

// Function to display the list and calculate the total
function show() {
    const listElement = document.getElementById("list");
    const totalElement = document.getElementById("total");
    
    listElement.innerHTML = "";
    let sum = 0;

    data.forEach(x => {
        sum += Number(x.a);
        let msg = `Hello ${x.n}, your bill ₹${x.a} is pending at Krishna Cloth Shop. Please pay soon.`;
        
        listElement.innerHTML += `
        <div class="card">
            <b>${x.n}</b><br>
            ₹${x.a}<br>
            <span class="small">Date: ${x.date}</span><br><br>
            <a class="whatsapp" target="_blank"
            href="https://wa.me/${x.p}?text=${encodeURIComponent(msg)}">
            WhatsApp
            </a>
            <button class="delete" onclick="del(${x.id})">Paid</button>
        </div>`;
    });

    totalElement.innerText = sum;
}

// Run show() on page load to display saved data
show(); 
